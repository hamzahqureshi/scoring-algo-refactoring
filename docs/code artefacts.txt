// ===== COMPLETE STARTER CODE FOR REFACTORING ASSIGNMENT =====
// Package: com.serand.assignment

// === MODELS ===

// Question.java
package com.serand.assignment.model;

public class Question {
    private String id;
    private String reference;
    private String question;
    private String[] availableAnswers;
    private String[] correctAnswers;
    private boolean isGemini;
    
    // Getters and setters
    public String getId() { return id; }
    public void setId(String id) { this.id = id; }
    
    public String getReference() { return reference; }
    public void setReference(String reference) { this.reference = reference; }
    
    public String getQuestion() { return question; }
    public void setQuestion(String question) { this.question = question; }
    
    public String[] getAvailableAnswers() { return availableAnswers; }
    public void setAvailableAnswers(String[] availableAnswers) { this.availableAnswers = availableAnswers; }
    
    public String[] getCorrectAnswers() { return correctAnswers; }
    public void setCorrectAnswers(String[] correctAnswers) { this.correctAnswers = correctAnswers; }
    
    public boolean isGemini() { return isGemini; }
    public void setGemini(boolean gemini) { isGemini = gemini; }
}

// SurveyResponseAnswer.java
package com.serand.assignment.model;

public class SurveyResponseAnswer {
    private String questionId;
    private String reference;
    private String type; // "multipleChoice", "text", "coding"
    private String[] arrayAnswer;
    private String stringAnswer;
    private int intAnswer;
    private double questionScore;
    private String scoreExplanation;
    
    // Getters and setters
    public String getQuestionId() { return questionId; }
    public void setQuestionId(String questionId) { this.questionId = questionId; }
    
    public String getReference() { return reference; }
    public void setReference(String reference) { this.reference = reference; }
    
    public String getType() { return type; }
    public void setType(String type) { this.type = type; }
    
    public String[] getArrayAnswer() { return arrayAnswer; }
    public void setArrayAnswer(String[] arrayAnswer) { this.arrayAnswer = arrayAnswer; }
    
    public String getStringAnswer() { return stringAnswer; }
    public void setStringAnswer(String stringAnswer) { this.stringAnswer = stringAnswer; }
    
    public int getIntAnswer() { return intAnswer; }
    public void setIntAnswer(int intAnswer) { this.intAnswer = intAnswer; }
    
    public double getQuestionScore() { return questionScore; }
    public void setQuestionScore(double questionScore) { this.questionScore = questionScore; }
    
    public String getScoreExplanation() { return scoreExplanation; }
    public void setScoreExplanation(String scoreExplanation) { this.scoreExplanation = scoreExplanation; }
}

// Survey.java
package com.serand.assignment.model;

import java.util.List;

public class Survey {
    private String id;
    private String name;
    private List<Question> questions;
    private Company company;
    private PersonalityProfile personalityProfile;
    
    // Getters and setters
    public String getId() { return id; }
    public void setId(String id) { this.id = id; }
    
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
    
    public List<Question> getQuestions() { return questions; }
    public void setQuestions(List<Question> questions) { this.questions = questions; }
    
    public Company getCompany() { return company; }
    public void setCompany(Company company) { this.company = company; }
    
    public PersonalityProfile getPersonalityProfile() { return personalityProfile; }
    public void setPersonalityProfile(PersonalityProfile personalityProfile) { this.personalityProfile = personalityProfile; }
}

// SurveyResponse.java
package com.serand.assignment.model;

import java.util.Map;

public class SurveyResponse {
    private String id;
    private Survey survey;
    private Candidate candidate;
    private Application application;
    private Map<String, SurveyResponseAnswer> answerMap;
    
    // Getters and setters
    public String getId() { return id; }
    public void setId(String id) { this.id = id; }
    
    public Survey getSurvey() { return survey; }
    public void setSurvey(Survey survey) { this.survey = survey; }
    
    public Candidate getCandidate() { return candidate; }
    public void setCandidate(Candidate candidate) { this.candidate = candidate; }
    
    public Application getApplication() { return application; }
    public void setApplication(Application application) { this.application = application; }
    
    public Map<String, SurveyResponseAnswer> getAnswerMap() { return answerMap; }
    public void setAnswerMap(Map<String, SurveyResponseAnswer> answerMap) { this.answerMap = answerMap; }
}

// Application.java
package com.serand.assignment.model;

public class Application {
    private String id;
    private Candidate candidate;
    private Survey survey;
    private Company company;
    private boolean complete;
    private SurveyResponse candidateResponse;
    private Scores scores;
    private double applicationOverallScore;
    
    // Getters and setters
    public String getId() { return id; }
    public void setId(String id) { this.id = id; }
    
    public Candidate getCandidate() { return candidate; }
    public void setCandidate(Candidate candidate) { this.candidate = candidate; }
    
    public Survey getSurvey() { return survey; }
    public void setSurvey(Survey survey) { this.survey = survey; }
    
    public Company getCompany() { return company; }
    public void setCompany(Company company) { this.company = company; }
    
    public boolean isComplete() { return complete; }
    public void setComplete(boolean complete) { this.complete = complete; }
    
    public SurveyResponse getCandidateResponse() { return candidateResponse; }
    public void setCandidateResponse(SurveyResponse candidateResponse) { this.candidateResponse = candidateResponse; }
    
    public Scores getScores() { return scores; }
    public void setScores(Scores scores) { this.scores = scores; }
    
    public double getApplicationOverallScore() { return applicationOverallScore; }
    public void setApplicationOverallScore(double applicationOverallScore) { this.applicationOverallScore = applicationOverallScore; }
}

// Candidate.java
package com.serand.assignment.model;

import java.util.Map;
import java.util.HashMap;

public class Candidate {
    private String id;
    private String email;
    private String firstName;
    private String lastName;
    private Map<String, Double> cvScoreMap = new HashMap<>();
    private Map<String, Double> surveyScore = new HashMap<>();
    private Map<String, Double> overallScoreMap = new HashMap<>();
    private double overallScore;
    
    // Getters and setters
    public String getId() { return id; }
    public void setId(String id) { this.id = id; }
    
    public String getEmail() { return email; }
    public void setEmail(String email) { this.email = email; }
    
    public String getFirstName() { return firstName; }
    public void setFirstName(String firstName) { this.firstName = firstName; }
    
    public String getLastName() { return lastName; }
    public void setLastName(String lastName) { this.lastName = lastName; }
    
    public Map<String, Double> getCvScoreMap() { return cvScoreMap; }
    public void setCvScoreMap(Map<String, Double> cvScoreMap) { this.cvScoreMap = cvScoreMap; }
    
    public Map<String, Double> getSurveyScore() { return surveyScore; }
    public void setSurveyScore(Map<String, Double> surveyScore) { this.surveyScore = surveyScore; }
    
    public Map<String, Double> getOverallScoreMap() { return overallScoreMap; }
    public void setOverallScoreMap(Map<String, Double> overallScoreMap) { this.overallScoreMap = overallScoreMap; }
    
    public double getOverallScore() { return overallScore; }
    public void setOverallScore(double overallScore) { this.overallScore = overallScore; }
}

// Company.java
package com.serand.assignment.model;

import java.util.List;

public class Company {
    private String id;
    private String name;
    private List<ValuesAnswer> valuesAnswers;
    private String[] culture;
    private WorkLifeBenefitsImpactDTO workLifeBenefitsImpact;
    private Weightings weightings;
    private Pillars pillars;
    
    // Getters and setters
    public String getId() { return id; }
    public void setId(String id) { this.id = id; }
    
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
    
    public List<ValuesAnswer> getValuesAnswers() { return valuesAnswers; }
    public void setValuesAnswers(List<ValuesAnswer> valuesAnswers) { this.valuesAnswers = valuesAnswers; }
    
    public String[] getCulture() { return culture; }
    public void setCulture(String[] culture) { this.culture = culture; }
    
    public WorkLifeBenefitsImpactDTO getWorkLifeBenefitsImpact() { return workLifeBenefitsImpact; }
    public void setWorkLifeBenefitsImpact(WorkLifeBenefitsImpactDTO workLifeBenefitsImpact) { 
        this.workLifeBenefitsImpact = workLifeBenefitsImpact; 
    }
    
    public Weightings getWeightings() { return weightings; }
    public void setWeightings(Weightings weightings) { this.weightings = weightings; }
    
    public Pillars getPillars() { return pillars; }
    public void setPillars(Pillars pillars) { this.pillars = pillars; }
}

// Scores.java
package com.serand.assignment.model;

import java.util.HashMap;
import java.util.Map;

public class Scores {
    private double values;
    private double culture;
    private double mindset;
    private double growthMindset;
    private WorkLife workLife;
    private Map<String, Double> customPillarScores = new HashMap<>();
    private Map<String, String[]> customPillarAnswers = new HashMap<>();
    private Weightings weightings;
    private Pillars pillars;
    
    public double getOverallScore() {
        if (pillars != null && !pillars.getPillars().isEmpty()) {
            // Dynamic pillars calculation
            double totalScore = 0;
            double totalWeight = 0;
            for (Map.Entry<String, Double> pillar : pillars.getPillars().entrySet()) {
                String pillarName = pillar.getKey();
                Double weight = pillar.getValue();
                Double score = customPillarScores.get(pillarName);
                if (score != null) {
                    totalScore += score * weight;
                    totalWeight += weight;
                }
            }
            return totalWeight > 0 ? totalScore / totalWeight : 0;
        } else if (weightings != null) {
            // Standard pillars calculation
            double workLifeScore = workLife != null ? workLife.getWorkLife() : 0;
            return (values * weightings.getValues() + 
                    culture * weightings.getCulture() + 
                    mindset * weightings.getMindset() + 
                    workLifeScore * weightings.getWorkLife()) / 
                   (weightings.getValues() + weightings.getCulture() + 
                    weightings.getMindset() + weightings.getWorkLife());
        }
        return 0;
    }
    
    public void recalculateOverallScore() {
        // Triggers getOverallScore() logic
    }
    
    public void addCustomPillarScore(String pillarName, double score) {
        customPillarScores.put(pillarName, score);
    }
    
    public void addCustomPillarAnswers(String pillarName, String[] answers) {
        customPillarAnswers.put(pillarName, answers);
    }
    
    // All getters and setters
    public double getValues() { return values; }
    public void setValues(double values) { this.values = values; }
    
    public double getCulture() { return culture; }
    public void setCulture(double culture) { this.culture = culture; }
    
    public double getMindset() { return mindset; }
    public void setMindset(double mindset) { this.mindset = mindset; }
    
    public double getGrowthMindset() { return growthMindset; }
    public void setGrowthMindset(double growthMindset) { this.growthMindset = growthMindset; }
    
    public WorkLife getWorkLife() { return workLife; }
    public void setWorkLife(WorkLife workLife) { this.workLife = workLife; }
    
    public Weightings getWeightings() { return weightings; }
    public void setWeightings(Weightings weightings) { this.weightings = weightings; }
    
    public Pillars getPillars() { return pillars; }
    public void setPillars(Pillars pillars) { this.pillars = pillars; }
    
    public Map<String, Double> getCustomPillarScores() { return customPillarScores; }
    public Map<String, String[]> getCustomPillarAnswers() { return customPillarAnswers; }
}

// Weightings.java
package com.serand.assignment.model;

public class Weightings {
    private double values = 0.25;
    private double culture = 0.25;
    private double mindset = 0.25;
    private double workLife = 0.25;
    
    // Getters and setters
    public double getValues() { return values; }
    public void setValues(double values) { this.values = values; }
    
    public double getCulture() { return culture; }
    public void setCulture(double culture) { this.culture = culture; }
    
    public double getMindset() { return mindset; }
    public void setMindset(double mindset) { this.mindset = mindset; }
    
    public double getWorkLife() { return workLife; }
    public void setWorkLife(double workLife) { this.workLife = workLife; }
}

// Pillars.java
package com.serand.assignment.model;

import java.util.HashMap;
import java.util.Map;

public class Pillars {
    private Map<String, Double> pillars = new HashMap<>();
    
    public Map<String, Double> getPillars() { return pillars; }
    public void setPillars(Map<String, Double> pillars) { this.pillars = pillars; }
}

// WorkLife.java
package com.serand.assignment.model;

public class WorkLife {
    private double workLife;
    private double impact;
    
    // Getters and setters
    public double getWorkLife() { return workLife; }
    public void setWorkLife(double workLife) { this.workLife = workLife; }
    
    public double getImpact() { return impact; }
    public void setImpact(double impact) { this.impact = impact; }
}

// Mindset.java
package com.serand.assignment.model;

public class Mindset {
    private double neuroticism;
    private double extraversion;
    private double openness;
    private double conscientiousness;
    private double agreeableness;
    private double socialDesirability;
    
    // Getters and setters
    public double getNeuroticism() { return neuroticism; }
    public void setNeuroticism(double neuroticism) { this.neuroticism = neuroticism; }
    
    public double getExtraversion() { return extraversion; }
    public void setExtraversion(double extraversion) { this.extraversion = extraversion; }
    
    public double getOpenness() { return openness; }
    public void setOpenness(double openness) { this.openness = openness; }
    
    public double getConscientiousness() { return conscientiousness; }
    public void setConscientiousness(double conscientiousness) { this.conscientiousness = conscientiousness; }
    
    public double getAgreeableness() { return agreeableness; }
    public void setAgreeableness(double agreeableness) { this.agreeableness = agreeableness; }
    
    public double getSocialDesirability() { return socialDesirability; }
    public void setSocialDesirability(double socialDesirability) { this.socialDesirability = socialDesirability; }
}

// PersonalityProfile.java
package com.serand.assignment.model;

public class PersonalityProfile {
    private double targetNeuroticism;
    private double targetExtraversion;
    private double targetOpenness;
    private double targetConscientiousness;
    private double targetAgreeableness;
    
    // Getters and setters
    public double getTargetNeuroticism() { return targetNeuroticism; }
    public void setTargetNeuroticism(double targetNeuroticism) { this.targetNeuroticism = targetNeuroticism; }
    
    public double getTargetExtraversion() { return targetExtraversion; }
    public void setTargetExtraversion(double targetExtraversion) { this.targetExtraversion = targetExtraversion; }
    
    public double getTargetOpenness() { return targetOpenness; }
    public void setTargetOpenness(double targetOpenness) { this.targetOpenness = targetOpenness; }
    
    public double getTargetConscientiousness() { return targetConscientiousness; }
    public void setTargetConscientiousness(double targetConscientiousness) { this.targetConscientiousness = targetConscientiousness; }
    
    public double getTargetAgreeableness() { return targetAgreeableness; }
    public void setTargetAgreeableness(double targetAgreeableness) { this.targetAgreeableness = targetAgreeableness; }
}

// ValuesAnswer.java
package com.serand.assignment.model;

public class ValuesAnswer {
    private String id;
    private String value;
    
    // Getters and setters
    public String getId() { return id; }
    public void setId(String id) { this.id = id; }
    
    public String getValue() { return value; }
    public void setValue(String value) { this.value = value; }
}

// WorkLifeBenefitsImpactDTO.java
package com.serand.assignment.model;

public class WorkLifeBenefitsImpactDTO {
    private String[] impact;
    private String[] workplace;
    private String[] benefits;
    
    // Getters and setters
    public String[] getImpact() { return impact; }
    public void setImpact(String[] impact) { this.impact = impact; }
    
    public String[] getWorkplace() { return workplace; }
    public void setWorkplace(String[] workplace) { this.workplace = workplace; }
    
    public String[] getBenefits() { return benefits; }
    public void setBenefits(String[] benefits) { this.benefits = benefits; }
}

// === DTOs ===

// SurveyProcessingResponse.java
package com.serand.assignment.dto;

import com.serand.assignment.model.Scores;

public class SurveyProcessingResponse {
    private boolean success;
    private double overallScore;
    private Scores scores;
    private String message;
    
    private SurveyProcessingResponse(boolean success, double overallScore, Scores scores, String message) {
        this.success = success;
        this.overallScore = overallScore;
        this.scores = scores;
        this.message = message;
    }
    
    public static SurveyProcessingResponse success(double overallScore, Scores scores, String message) {
        return new SurveyProcessingResponse(true, overallScore, scores, message);
    }
    
    public static SurveyProcessingResponse error(String message) {
        return new SurveyProcessingResponse(false, 0, null, message);
    }
    
    // Getters
    public boolean isSuccess() { return success; }
    public double getOverallScore() { return overallScore; }
    public Scores getScores() { return scores; }
    public String getMessage() { return message; }
}

// === SERVICES ===

// GeminiService.java (Mock implementation)
package com.serand.assignment.service;

import com.serand.assignment.model.Candidate;
import com.serand.assignment.model.Survey;

public class GeminiService {
    
    public String getSurveyAnswerRelevanceScore(String answer, String question, String surveyName) {
        // Mock implementation - returns score (0-1) and explanation separated by hyphen
        double score = 0.7 + (Math.random() * 0.3); // Random score 0.7-1.0
        String explanation = "AI evaluated the answer as highly relevant to the question.";
        return String.format("%.2f-%s", score, explanation);
    }
    
    public void generateCandidateFeedback(Candidate candidate, Survey survey) {
        // Mock implementation
        System.out.println("Generating AI feedback for candidate: " + candidate.getId());
    }
}

// ApplicationTrackingService.java (Mock implementation)
package com.serand.assignment.service;

import com.serand.assignment.model.Application;

public class ApplicationTrackingService {
    
    public void pushingScoreToAts(Application application) {
        // Mock implementation
        System.out.println("Pushing scores to ATS for application: " + application.getId());
        System.out.println("Overall Score: " + application.getApplicationOverallScore());
    }
}

// SurveyService.java (Mock implementation)
package com.serand.assignment.service;

import com.serand.assignment.model.Mindset;
import com.serand.assignment.model.PersonalityProfile;

public class SurveyService {
    
    public Mindset calculateZindexScore(Mindset candidateMindset, PersonalityProfile targetProfile) {
        // Mock Z-index calculation - in real implementation this would normalize scores
        Mindset zIndexed = new Mindset();
        zIndexed.setNeuroticism(candidateMindset.getNeuroticism() * 0.8);
        zIndexed.setExtraversion(candidateMindset.getExtraversion() * 0.8);
        zIndexed.setOpenness(candidateMindset.getOpenness() * 0.8);
        zIndexed.setConscientiousness(candidateMindset.getConscientiousness() * 0.8);
        zIndexed.setAgreeableness(candidateMindset.getAgreeableness() * 0.8);
        zIndexed.setSocialDesirability(candidateMindset.getSocialDesirability() * 0.8);
        return zIndexed;
    }
}

// CandidateService.java (Mock implementation)
package com.serand.assignment.service;

import com.serand.assignment.model.Candidate;

public class CandidateService {
    
    public void saveCandidate(Candidate candidate) {
        // Mock save
        System.out.println("Saving candidate: " + candidate.getId());
    }
}

// ApplicationService.java (Mock implementation)
package com.serand.assignment.service;

import com.serand.assignment.model.Application;

public class ApplicationService {
    
    public void saveApplication(Application application) {
        // Mock save
        System.out.println("Saving application: " + application.getId());
    }
}